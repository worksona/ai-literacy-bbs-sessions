<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Worksona AI Literacy -- for business | Proven Strategies in Effective Lessons</title>
    <script src="https://cdn.jsdelivr.net/npm/marked@9.1.6/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-okaidia.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <style>
        :root {
            --orange-primary: #ff8c00;
            --orange-light: rgba(255, 140, 0, 0.1);
            --orange-shadow: rgba(255, 140, 0, 0.15);
            --mustard: #b8860b;
            --mustard-light: rgba(184, 134, 11, 0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #2d3748;
            background: linear-gradient(135deg, #0066cc 0%, #004499 100%);
            height: 100vh;
            overflow: hidden;
        }
        
        .container {
            height: 100vh;
            display: flex;
            flex-direction: column;
            max-width: none;
            padding: 0;
        }
        
        .main-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0;
            flex: 1;
            overflow: hidden;
        }
        
        @media (max-width: 1024px) {
            .main-layout {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .chatbot-header {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }
            
            .session-selector {
                justify-content: center;
            }
            
            .api-key-section {
                flex-direction: column;
                align-items: stretch;
            }
            
            .api-key-input {
                min-width: auto;
            }
        }
        
        @media (max-width: 640px) {
            .container {
                padding: 0.5rem;
            }
            
            .benefits-section {
                padding: 1rem;
            }
            
            .benefits-grid {
                grid-template-columns: 1fr;
            }
            
            .main-content {
                padding: 1rem;
            }
            
            .sessions-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .session-card {
                padding: 1.5rem;
            }
            
            .session-actions {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .chatbot-header {
                padding: 1rem;
            }
            
            .chatbot-title-section {
                align-items: center;
                text-align: center;
            }
            
            .session-title {
                font-size: 0.8rem;
            }
            
            .session-subtitle {
                font-size: 0.7rem;
            }
            
            .api-key-section {
                padding: 1rem;
            }
            
            .chat-input-area {
                padding: 0.5rem;
            }
            
            .session-selector {
                flex-wrap: wrap;
                gap: 0.25rem;
            }
            
            .session-btn {
                padding: 0.25rem 0.5rem;
                font-size: 0.7rem;
            }
        }
        
        .header {
            color: white;
            padding: 0.4rem 1.5rem;
            background: rgba(0,0,0,0.3);
            border-bottom: 1px solid rgba(255,255,255,0.2);
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 1rem;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
        }
        
        .header-content {
            display: flex;
            align-items: baseline;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .help-link {
            color: white;
            text-decoration: none;
            opacity: 0.7;
            transition: all 0.2s;
            padding: 0.25rem;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .help-link:hover {
            opacity: 1;
            background: rgba(255, 255, 255, 0.1);
            transform: scale(1.1);
        }
        
        .header h1 {
            font-size: 1.25rem;
            font-weight: 400;
            margin: 0;
            letter-spacing: -0.02em;
        }
        
        .header .subtitle {
            font-size: 0.7rem;
            opacity: 0.8;
            margin: 0;
            font-weight: 300;
        }
        
        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.25rem;
            }
            .header-content {
                flex-direction: column;
                gap: 0.25rem;
            }
        }
        
        /* Pane Styles */
        .left-pane, .right-pane {
            height: 100%;
        }
        
        .left-pane {
            background: #f8fafc;
            overflow-y: auto;
            border-right: 4px solid var(--orange-primary);
            box-shadow: 2px 0 8px var(--orange-shadow);
        }
        
        .right-pane {
            background: #f5f5f5;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .pane-header {
            background: #f8fafc;
            padding: 0.75rem 1.5rem;
            border-bottom: 1px solid #e2e8f0;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        .pane-header h2 {
            font-size: 1.1rem;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 0.2rem;
        }
        
        .pane-header p {
            font-size: 0.8rem;
            color: #4a5568;
            margin: 0;
        }
        
        .chat-pane-header {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border: 1px solid #bae6fd;
            border-bottom: 1px solid #7dd3fc;
            padding: 0.75rem 1.5rem;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        .chat-pane-header h2 {
            font-size: 1.1rem;
            font-weight: 600;
            color: #0369a1;
            margin-bottom: 0.2rem;
        }
        
        .chat-pane-header p {
            font-size: 0.8rem;
            color: #0c4a6e;
            margin: 0;
        }
        
        .curriculum-intro {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border: 1px solid #bae6fd;
            border-radius: 8px;
            padding: 1.25rem;
            margin-bottom: 2rem;
        }
        
        .curriculum-intro h3 {
            color: #0369a1;
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
        }
        
        .curriculum-intro p {
            color: #0c4a6e;
            font-size: 0.875rem;
            line-height: 1.5;
            margin-bottom: 0.75rem;
        }
        
        .curriculum-intro p:last-child {
            margin-bottom: 0;
        }
        
        .curriculum-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .stat-item {
            text-align: center;
            padding: 0.75rem;
            background: rgba(255,255,255,0.7);
            border-radius: 6px;
        }
        
        .stat-number {
            font-size: 1.5rem;
            font-weight: 700;
            color: #0066cc;
            display: block;
        }
        
        .stat-label {
            font-size: 0.7rem;
            color: #0c4a6e;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.025em;
        }
        
        .pane-content {
            padding: 1.5rem;
        }
        
        /* Info sections - full width and stacked */
        .info-section {
            margin-top: 2rem;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        
        .info-card {
            text-align: left;
            padding: 1.5rem;
            background: #f8fafc;
            border-radius: 6px;
            border-left: 3px solid #0066cc;
        }
        
        .info-card h3 {
            font-size: 1.1rem;
            margin-bottom: 0.75rem;
            color: #2d3748;
        }
        
        .info-card p {
            color: #4a5568;
            line-height: 1.5;
        }
        
        .info-card a {
            color: #0066cc;
            text-decoration: none;
            font-weight: 500;
        }
        
        .info-card a:hover {
            text-decoration: underline;
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.75rem;
            }
            .header {
                padding: 1rem;
            }
            .pane-content {
                padding: 1rem;
            }
        }
        
        /* Session Cards */
        .session-card {
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        
        .session-card:hover {
            border-color: var(--orange-primary);
            box-shadow: 0 4px 12px var(--orange-shadow);
        }
        
        .session-header {
            padding: 1.25rem;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border-bottom: 1px solid #e2e8f0;
        }
        
        .session-content {
            padding: 1.25rem;
        }
        
        .session-description {
            font-size: 0.8rem;
            color: #4a5568;
            margin-bottom: 1rem;
            line-height: 1.4;
        }
        
        .session-highlights {
            margin: 1rem 0;
        }
        
        .highlights-title {
            font-size: 0.75rem;
            font-weight: 600;
            color: #0066cc;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.025em;
        }
        
        .highlight-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        
        .highlight-tag {
            background: #ffffff;
            color: #0066cc;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 600;
            border: 2px solid #0066cc;
            transition: all 0.2s;
        }
        
        .highlight-tag:hover {
            background: #0066cc;
            color: #ffffff;
            transform: translateY(-1px);
        }
        
        .learning-examples {
            margin: 1rem 0;
        }
        
        .examples-title {
            font-size: 0.75rem;
            font-weight: 600;
            color: #059669;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.025em;
        }
        
        .example-item {
            background: #f0fdf4;
            border-left: 3px solid #10b981;
            padding: 0.75rem;
            margin-bottom: 0.5rem;
            border-radius: 4px;
        }
        
        .example-item:last-child {
            margin-bottom: 0;
        }
        
        .example-text {
            font-size: 0.75rem;
            color: #065f46;
            line-height: 1.3;
            font-style: italic;
        }
        
        .example-label {
            font-size: 0.65rem;
            color: #059669;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.025em;
            margin-bottom: 0.25rem;
        }
        
        .session-number {
            display: inline-block;
            background: linear-gradient(135deg, #0066cc 0%, var(--orange-primary) 100%);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 3px;
            font-size: 0.875rem;
            font-weight: 500;
            margin-bottom: 1rem;
            box-shadow: 0 2px 4px var(--orange-light);
        }
        
        .session-snippet {
            background: #282c34;
            border-radius: 6px;
            padding: 1rem;
            margin: 1rem 0;
            font-family: 'Courier New', monospace;
            font-size: 0.75rem;
            line-height: 1.3;
            color: #abb2bf;
            overflow-x: auto;
            border-left: 3px solid #0066cc;
        }
        
        .session-snippet pre {
            margin: 0;
            white-space: pre-wrap;
        }
        
        .session-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        
        .session-subtitle {
            font-size: 0.875rem;
            color: #718096;
            margin-bottom: 1rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .session-description {
            color: #4a5568;
            margin-bottom: 1.5rem;
        }
        
        .session-actions {
            display: flex;
            gap: 0.75rem;
            margin-top: 1rem;
        }
        
        .copy-session-btn {
            background: #0066cc;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            flex: 1;
        }
        
        .copy-session-btn:hover {
            background: linear-gradient(135deg, #004499 0%, var(--mustard) 100%);
            transform: translateY(-1px);
            box-shadow: 0 4px 8px var(--orange-shadow);
        }
        
        .copy-session-btn.copied {
            background: #38a169;
        }
        
        .btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 4px;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            text-decoration: none;
            display: inline-block;
        }
        
        .btn-primary {
            background: #0066cc;
            color: white;
        }
        
        .btn-primary:hover {
            background: #004499;
        }
        
        .btn-secondary {
            background: transparent;
            color: #0066cc;
            border: 1px solid #0066cc;
        }
        
        .btn-secondary:hover {
            background: #0066cc;
            color: white;
        }
        
        .info-section {
            margin-top: 3rem;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
        }
        
        .info-card {
            text-align: center;
            padding: 2rem;
            border-radius: 6px;
            background: #f8fafc;
        }
        
        .info-card h3 {
            font-size: 1.25rem;
            margin-bottom: 1rem;
            color: #2d3748;
        }
        
        .info-card p {
            color: #4a5568;
        }
        
        .footer {
            text-align: center;
            padding: 0.25rem;
            color: white;
            opacity: 0.6;
            font-size: 0.6rem;
            background: rgba(0,0,0,0.05);
            line-height: 1.2;
        }
        
        .footer a {
            color: white;
            text-decoration: none;
            font-weight: 400;
        }
        
        .footer a:hover {
            text-decoration: underline;
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
        }
        
        .modal-content {
            background-color: #1a202c;
            color: #e2e8f0;
            margin: 5% auto;
            padding: 2rem;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            border-radius: 8px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.875rem;
            line-height: 1.4;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        .close {
            color: #a0aec0;
            font-size: 1.5rem;
            font-weight: bold;
            cursor: pointer;
        }
        
        .close:hover {
            color: white;
        }
        
        .copy-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.875rem;
            margin-top: 1rem;
        }
        
        .copy-btn:hover {
            background: #5a67d8;
        }
        
        pre {
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        
        /* Chatbot Styles */
        .chatbot-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: white;
            overflow: hidden;
            position: relative;
        }
        
        .chat-instructions {
            background: #e6f3ff;
            padding: 0.75rem 1rem;
            border-bottom: 1px solid #b3d9ff;
            font-size: 0.8rem;
            color: #1a365d;
            text-align: center;
        }
        
        .chat-instructions strong {
            color: #0066cc;
        }
        
        .chatbot-header {
            background: #0066cc;
            color: white;
            padding: 0.75rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 20;
        }
        
        .serverless-notice {
            padding: 0.75rem 2rem;
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
            border-bottom: 1px solid #b8daff;
            border-left: 4px solid #28a745;
            position: sticky;
            top: 48px;
            z-index: 20;
        }

        .notice-content {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .notice-icon {
            font-size: 1.2rem;
        }

        .notice-text strong {
            color: #155724;
            font-size: 0.9rem;
        }

        .notice-text small {
            color: #155724;
            opacity: 0.8;
            font-size: 0.8rem;
        }
        
        .api-key-section {
            background: #f8fafc;
            padding: 1rem 2rem;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            gap: 1rem;
            align-items: center;
            flex-wrap: wrap;
            position: sticky;
            top: 48px;
            z-index: 19;
        }
        
        .api-key-input {
            flex: 1;
            min-width: 200px;
            padding: 0.5rem 0.75rem;
            border: 1px solid #cbd5e0;
            border-radius: 4px;
            font-size: 0.875rem;
        }
        
        .api-provider-select {
            padding: 0.5rem 0.75rem;
            border: 1px solid #cbd5e0;
            border-radius: 4px;
            font-size: 0.875rem;
            background: white;
        }
        
        .api-status {
            font-size: 0.75rem;
            padding: 0.25rem 0.5rem;
            border-radius: 3px;
            font-weight: 500;
        }
        
        .api-status.connected {
            background: #c6f6d5;
            color: #22543d;
        }
        
        .api-status.disconnected {
            background: #fed7d7;
            color: #742a2a;
        }
        
        .chatbot-title-section {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        
        .chatbot-title {
            font-size: 1rem;
            font-weight: 600;
        }
        
        .session-context {
            margin-top: 0.25rem;
        }
        
        .session-title {
            font-size: 0.9rem;
            font-weight: 500;
            color: rgba(255, 255, 255, 0.95);
            line-height: 1.2;
        }
        
        .session-subtitle {
            font-size: 0.75rem;
            font-weight: 400;
            color: rgba(255, 255, 255, 0.8);
            text-transform: uppercase;
            letter-spacing: 0.025em;
            margin-top: 0.1rem;
        }
        
        .session-selector {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }
        
        .session-btn {
            background: #ffffff;
            color: #0066cc;
            border: 2px solid #0066cc;
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .session-btn:hover {
            background: #0066cc;
            color: #ffffff;
        }
        
        .session-btn.active {
            background: var(--orange-primary);
            color: #ffffff;
            border-color: var(--orange-primary);
            font-weight: 600;
        }
        
        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            min-height: 0;
        }
        
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 0.5rem 1rem;
            background: #e8e8e8;
        }
        
        .message {
            margin-bottom: 1rem;
            display: flex;
            flex-direction: column;
        }
        
        .message.user {
            align-items: flex-end;
        }
        
        .message.assistant {
            align-items: flex-start;
        }
        
        .message-content {
            max-width: 85%;
            padding: 0.75rem 1rem;
            border-radius: 12px;
            font-size: 0.85rem;
            line-height: 1.3;
        }
        
        .message.user .message-content {
            background: #0066cc;
            color: white;
        }
        
        .message.assistant .message-content {
            background: white;
            border: 1px solid #d1d5db;
            color: #1f2937;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .message-time {
            font-size: 0.75rem;
            color: #6b7280;
            margin-top: 0.25rem;
            padding: 0 0.5rem;
        }
        
        .chat-input-area {
            padding: 0.75rem 1rem;
            border-top: 1px solid #e2e8f0;
            background: white;
            position: sticky;
            bottom: 0;
            z-index: 19;
        }
        
        .chat-input-container {
            display: flex;
            gap: 1rem;
            align-items: flex-end;
        }
        
        .chat-input {
            flex: 1;
            padding: 0.75rem 1rem;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            resize: none;
            min-height: 40px;
            max-height: 120px;
            font-family: inherit;
            font-size: 0.9rem;
        }
        
        .chat-input:focus {
            outline: none;
            border-color: #0066cc;
        }
        
        .send-btn {
            background: #0066cc;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: background 0.2s;
        }
        
        .send-btn:hover:not(:disabled) {
            background: #004499;
        }
        
        .send-btn:disabled {
            background: #a0aec0;
            cursor: not-allowed;
        }
        
        .welcome-message {
            text-align: center;
            color: #4a5568;
            padding: 2rem;
            font-style: italic;
            background: #f7fafc;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
        }
        
        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #6b7280;
            font-style: italic;
            padding: 1rem 1.5rem;
        }
        
        .typing-dots {
            display: flex;
            gap: 0.25rem;
        }
        
        .typing-dot {
            width: 4px;
            height: 4px;
            background: #6b7280;
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }
        
        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        @keyframes typing {
            0%, 60%, 100% {
                opacity: 0.3;
            }
            30% {
                opacity: 1;
            }
        }
        
        .bbs-content {
            font-family: 'Courier New', monospace;
            background: #1a1a1a;
            color: #f0f0f0;
            padding: 0.5rem;
            border-radius: 4px;
            white-space: pre-wrap;
            margin: 0.25rem 0;
            font-size: 0.9rem;
            line-height: 1.2;
            border-left: 3px solid #0066cc;
            overflow-x: auto;
            border: 1px solid #404040;
            max-width: 100%;
            word-wrap: break-word;
        }
        
        /* BBS Terminal Colors - Enhanced Contrast */
        .bbs-content .bbs-header {
            color: #00ff41;
            font-weight: bold;
        }
        
        .bbs-content .bbs-step {
            color: #ffff41;
            font-weight: bold;
        }
        
        .bbs-content .bbs-goal {
            color: #41ffff;
            font-weight: bold;
        }
        
        .bbs-content .bbs-action {
            color: #ff8a8a;
        }
        
        .bbs-content .bbs-instruction {
            color: var(--orange-primary);
        }
        
        .bbs-content .bbs-prompt {
            color: #90ee90;
            font-weight: bold;
        }
        
        .bbs-content .bbs-menu {
            color: #87ceeb;
        }
        
        .bbs-content .bbs-status {
            color: #dda0dd;
        }
        
        .bbs-content .bbs-number {
            color: #ffd700;
            font-weight: bold;
        }
        
        .bbs-content .bbs-emphasis {
            color: #ff69b4;
            font-weight: bold;
        }
        
        .bbs-content .bbs-success {
            color: #32cd32;
            font-weight: bold;
        }
        
        .bbs-content .bbs-warning {
            color: #ff6347;
            font-weight: bold;
        }
        
        /* Additional terminal effects - Enhanced */
        .bbs-content .bbs-header {
            text-shadow: 0 1px 1px rgba(0, 0, 0, 0.3);
        }
        
        .bbs-content .bbs-step {
            text-shadow: 0 1px 1px rgba(0, 0, 0, 0.3);
        }
        
        .bbs-content .bbs-prompt {
            text-shadow: 0 1px 1px rgba(0, 0, 0, 0.3);
        }
        
        .bbs-content .bbs-number {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1) 0%, var(--orange-light) 100%);
            padding: 0.05rem 0.2rem;
            border-radius: 2px;
            border: 1px solid var(--orange-primary);
        }

        /* Welcome Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .welcome-modal {
            background: white;
            border-radius: 12px;
            max-width: 700px;
            width: 90%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            transform: translateY(-20px);
            transition: transform 0.3s ease;
        }

        .modal-overlay.show .welcome-modal {
            transform: translateY(0);
        }

        .modal-header {
            background: linear-gradient(135deg, #0066cc 0%, var(--orange-primary) 100%);
            color: white;
            padding: 2rem;
            text-align: center;
            border-radius: 12px 12px 0 0;
        }

        .modal-header h2 {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .modal-header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .modal-content {
            padding: 1.5rem 2rem;
        }

        .modal-section {
            margin-bottom: 1rem;
        }

        .modal-section h3 {
            color: #2d3748;
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }

        .modal-section p {
            color: #4a5568;
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .mermaid-container {
            background: #f8fafc;
            border: 2px solid var(--orange-primary);
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            text-align: center;
        }

        .modal-footer {
            background: #f8fafc;
            padding: 1.5rem 2rem;
            border-radius: 0 0 12px 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-top: 1px solid #e2e8f0;
        }

        .dont-show-again {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #4a5568;
            font-size: 0.9rem;
        }

        .dont-show-again input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: var(--orange-primary);
        }

        .modal-close-btn {
            background: linear-gradient(135deg, #0066cc 0%, var(--orange-primary) 100%);
            color: white;
            border: none;
            padding: 0.75rem 2rem;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1rem;
        }

        .modal-close-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px var(--orange-shadow);
        }

        @media (max-width: 640px) {
            .welcome-modal {
                width: 95%;
                margin: 1rem;
            }
            
            .modal-header {
                padding: 1.5rem;
            }
            
            .modal-header h2 {
                font-size: 1.5rem;
            }
            
            .modal-content {
                padding: 1.5rem;
            }
            
            .modal-footer {
                flex-direction: column;
                gap: 1rem;
                align-items: stretch;
            }
        }
    </style>
</head>
<body>
    <!-- Welcome Modal -->
    <div class="modal-overlay" id="welcomeModal">
        <div class="welcome-modal">
            <div class="modal-header">
                <h2>üöÄ Welcome to Worksona AI Literacy</h2>
                <p>Your business toolkit for proven AI strategies</p>
            </div>
            <div class="modal-content">
                <div class="modal-section">
                    <p style="font-size: 1.1rem; text-align: center; margin-bottom: 2rem;">Your business AI literacy toolkit with proven strategies taught through effective and efficient lessons. Get hands-on experience that delivers immediate ROI.</p>
                    
                    <div class="mermaid-container">
                        <div class="mermaid">
                            flowchart LR
                                A[üìö Browse Lessons<br/>Left Panel] --> B[üß™ Test Interactive<br/>Right Panel] 
                                B --> C[üìã Copy & Deploy<br/>Your Organization]
                                
                                style A fill:#e6f3ff,stroke:#0066cc,stroke-width:2px,color:#0066cc
                                style B fill:#fff5e6,stroke:#ff8c00,stroke-width:2px,color:#ff8c00
                                style C fill:#f0f8e6,stroke:#b8860b,stroke-width:2px,color:#b8860b
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <label class="dont-show-again">
                    <input type="checkbox" id="dontShowAgain">
                    Don't show this again
                </label>
                <button class="modal-close-btn" onclick="closeWelcomeModal()">
                    Get Started! üéØ
                </button>
            </div>
        </div>
    </div>

    <div class="container">
        <header class="header">
            <div class="header-content">
                <h1>Worksona AI Literacy -- for business</h1>
                <p class="subtitle">Proven Strategies Taught in Effective and Efficient Lessons</p>
            </div>
            <a href="userguide.html" target="_blank" class="help-link" title="User Guide">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"/>
                    <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
                    <path d="M12 17h.01"/>
                </svg>
            </a>
        </header>
        
        <div class="main-layout">
            <!-- Learning Sessions Pane -->
            <div class="left-pane">
                <div class="pane-header">
                    <h2>
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: inline-block; margin-right: 0.5rem; vertical-align: text-top;">
                            <path d="M22 10v6M2 10l10-5 10 5-10 5z"/>
                            <path d="M6 12v5c3 3 9 3 12 0v-5"/>
                        </svg>
                        Worksona AI Literacy Toolkit
                    </h2>
                    <p><span style="color: #ff8c00; font-weight: 600;">COPY N PASTE LESSONS</span>‚Äîtake them anywhere!</p>
                </div>
                <div class="pane-content">
                    <div class="curriculum-intro">
                        <h3>AI Literacy Toolkit: Proven Strategies for Business Success</h3>
                        <p>This business-focused toolkit provides proven strategies taught through effective and efficient lessons. Each session delivers measurable ROI through improved productivity, reduced operational costs, and enhanced decision-making capabilities.</p>
                        <p><strong>BBS-Style Experience:</strong> Inspired by the text-based interfaces of old-school bulletin board systems, this toolkit champions a ruthless economy of function over form. The minimal, terminal-style interface eliminates distractions and focuses purely on learning efficiency‚Äîproving that sometimes the most powerful tools are the simplest ones.</p>
                        
                        <p><strong>Business Impact:</strong> Organizations report 40-60% reduction in content creation time, 50% improvement in communication effectiveness, and significant cost savings on consulting fees. Each session provides immediately applicable skills that drive bottom-line results.</p>
                        <p><strong>Primary Use:</strong> This literacy toolkit is designed for use in ChatGPT, Claude, and other enterprise LLMs where you copy and paste the session content for full interactive training. The chatbot on the right provides a preview to get a flavour of the experience before deploying in your preferred AI platform.</p>
                        <p><strong>Implementation:</strong> Copy any session below and deploy across your team using ChatGPT, Claude, or your enterprise LLM. Each module includes business case studies, ROI metrics, and scalable frameworks for organizational adoption.</p>
                        <p><strong>Enterprise Ready:</strong> Open source framework available on <a href="https://github.com/worksona/ai-literacy-bbs-sessions" target="_blank" style="color: #0066cc; text-decoration: none; font-weight: 500;">GitHub</a> ‚Äî customize for your industry, integrate with existing training programs, and track team progress.</p>
                        
                        <div class="curriculum-stats">
                            <div class="stat-item">
                                <span class="stat-number">90</span>
                                <span class="stat-label">Minutes Investment</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number">6x</span>
                                <span class="stat-label">Productivity Gain</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number">25+</span>
                                <span class="stat-label">Lessons & Strategies Gained</span>
                            </div>
                        </div>
                    </div>
                <div class="session-card">
                    <div class="session-header">
                        <div class="session-number">Session 1</div>
                        <h3 class="session-title">Prompting Mastery</h3>
                        <div class="session-subtitle">Zero-Shot Prompting Fundamentals</div>
                    </div>
                    <div class="session-content">
                        <p class="session-description">Transform vague requests into precise business outcomes. Learn to communicate with AI like a top executive‚Äîclear, specific, results-driven. Reduce project delays by 60% through better AI direction and eliminate the "trial and error" approach that wastes valuable time.</p>
                        
                        <div class="session-highlights">
                            <div class="highlights-title">Key Skills</div>
                            <div class="highlight-list">
                                <span class="highlight-tag">Executive Communication</span>
                                <span class="highlight-tag">Outcome Specification</span>
                                <span class="highlight-tag">Quality Control</span>
                                <span class="highlight-tag">Business Constraints</span>
                            </div>
                        </div>
                        
                        <div class="learning-examples">
                            <div class="examples-title">Business Impact</div>
                            <div class="example-item">
                                <div class="example-label">Executive Briefing</div>
                                <div class="example-text">"Summarize the report" ‚Üí "Create a 3-bullet executive summary focusing on revenue impact, risk factors, and next actions for C-suite review"</div>
                            </div>
                            <div class="example-item">
                                <div class="example-label">Strategic Planning</div>
                                <div class="example-text">"Help with marketing" ‚Üí "Develop a Q4 go-to-market strategy for enterprise clients, including budget allocation, timeline, and success metrics"</div>
                            </div>
                        </div>
                        
                        <div class="session-snippet">
                            <pre>‚îå‚îÄ AI Mastery ¬∑ Session 1 ¬∑ BBS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 1) Session Wizard (start here)                              ‚îÇ
‚îÇ 2) Exercises                                                ‚îÇ
‚îÇ 3) Checklist                                                ‚îÇ
‚îÇ 4) Assessment & Scoring                                     ‚îÇ
‚îÇ 5) Resources                                                ‚îÇ
‚îÇ m) Main  b) Back  ?) Help  q) Quit                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</pre>
                        </div>
                        <div class="session-actions">
                            <button class="copy-session-btn" onclick="copySessionContent('session-1-prompting-mastery.md')">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: inline-block; margin-right: 0.5rem;">
                                    <rect width="14" height="14" x="8" y="8" rx="2" ry="2"/>
                                    <path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>
                                </svg>
                                Copy Session
                            </button>
                            <button class="btn btn-secondary" onclick="viewSession('session-1-prompting-mastery.md')">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: inline-block; margin-right: 0.5rem;">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                    <circle cx="12" cy="12" r="3"/>
                                </svg>
                                Preview
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="session-card">
                    <div class="session-header">
                        <div class="session-number">Session 2</div>
                        <h3 class="session-title">Contextual Direction</h3>
                        <div class="session-subtitle">Role-Based and Few-Shot Prompting</div>
                    </div>
                    <div class="session-content">
                        <p class="session-description">Master contextual leadership to get AI responses that match your company culture and standards. Learn to assign roles, provide examples, and structure outputs that align with your organizational needs‚Äîturning AI into your most effective team member.</p>
                        
                        <div class="session-highlights">
                            <div class="highlights-title">Key Skills</div>
                            <div class="highlight-list">
                                <span class="highlight-tag">Cultural Alignment</span>
                                <span class="highlight-tag">Template Creation</span>
                                <span class="highlight-tag">Brand Consistency</span>
                                <span class="highlight-tag">Stakeholder Perspectives</span>
                            </div>
                        </div>
                        
                        <div class="learning-examples">
                            <div class="examples-title">Executive Applications</div>
                            <div class="example-item">
                                <div class="example-label">Board Communication</div>
                                <div class="example-text">"As our Chief Strategy Officer, draft a board memo on market expansion using our standard format and conservative tone"</div>
                            </div>
                            <div class="example-item">
                                <div class="example-label">Brand Consistency</div>
                                <div class="example-text">Provide 2-3 examples of your company's communication style and AI will match your brand voice across all outputs</div>
                            </div>
                        </div>
                        
                        <div class="session-snippet">
                            <pre>**Exercise Pattern (Functional)**

Step 1 ‚Äî Learner Input
Learner types their prompt + model output summary.

Step 2 ‚Äî Tutor Analysis  
Tutor analyzes clarity, context use, and structural direction.

Step 3 ‚Äî Tutor Suggestions (copyable)
>>> Improved Prompt 1
>>> Improved Prompt 2  
>>> Improved Prompt 3</pre>
                        </div>
                        <div class="session-actions">
                            <button class="copy-session-btn" onclick="copySessionContent('session-2-contextual-direction.md')">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: inline-block; margin-right: 0.5rem;">
                                    <rect width="14" height="14" x="8" y="8" rx="2" ry="2"/>
                                    <path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>
                                </svg>
                                Copy Session
                            </button>
                            <button class="btn btn-secondary" onclick="viewSession('session-2-contextual-direction.md')">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: inline-block; margin-right: 0.5rem;">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                    <circle cx="12" cy="12" r="3"/>
                                </svg>
                                Preview
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="session-card">
                    <div class="session-header">
                        <div class="session-number">Session 3</div>
                        <h3 class="session-title">Strategic Reasoning</h3>
                        <div class="session-subtitle">Multi-Step Thinking & Problem Decomposition</div>
                    </div>
                    <div class="session-content">
                        <p class="session-description">Develop strategic thinking capabilities that scale across your organization. Master the art of breaking down complex business challenges into systematic AI-assisted analysis. Essential for data-driven decision making and competitive intelligence.</p>
                        
                        <div class="session-highlights">
                            <div class="highlights-title">Key Skills</div>
                            <div class="highlight-list">
                                <span class="highlight-tag">Strategic Analysis</span>
                                <span class="highlight-tag">Decision Frameworks</span>
                                <span class="highlight-tag">Risk Assessment</span>
                                <span class="highlight-tag">Competitive Intelligence</span>
                            </div>
                        </div>
                        
                        <div class="learning-examples">
                            <div class="examples-title">You'll Practice</div>
                            <div class="example-item">
                                <div class="example-label">Break It Down</div>
                                <div class="example-text">Transform overwhelming problems into clear, sequential steps AI can follow</div>
                            </div>
                            <div class="example-item">
                                <div class="example-label">Think Aloud</div>
                                <div class="example-text">Use chain-of-thought prompting to see AI's reasoning process step-by-step</div>
                            </div>
                        </div>
                        
                        <div class="session-snippet">
                            <pre>[Session 3 ¬∑ Strategic Reasoning] [‚è±Ô∏è 0/15m] [Progress: 0/7]
Checklist: 0/7 | Score: N/A

**Flow Steps (Progress total = 7):**
1. Welcome & Goals (1m)
2. Warm-Up: Multi-step Reasoning (2m)
3. Exercise 1: Problem Decomposition (4m)
4. Exercise 2: Chain of Thought (4m)</pre>
                        </div>
                        <div class="session-actions">
                            <button class="copy-session-btn" onclick="copySessionContent('session-3-strategic-reasoning.md')">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: inline-block; margin-right: 0.5rem;">
                                    <rect width="14" height="14" x="8" y="8" rx="2" ry="2"/>
                                    <path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>
                                </svg>
                                Copy Session
                            </button>
                            <button class="btn btn-secondary" onclick="viewSession('session-3-strategic-reasoning.md')">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: inline-block; margin-right: 0.5rem;">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                    <circle cx="12" cy="12" r="3"/>
                                </svg>
                                Preview
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="session-card">
                    <div class="session-header">
                        <div class="session-number">Session 4</div>
                        <h3 class="session-title">Orchestrated Workflow</h3>
                        <div class="session-subtitle">Complex Multi-Agent Coordination</div>
                    </div>
                    <div class="session-content">
                        <p class="session-description">Build enterprise-grade AI workflows that transform how your organization operates. Learn to orchestrate multiple AI agents for complex projects, creating scalable processes that deliver consistent results and measurable business value.</p>
                        
                        <div class="session-highlights">
                            <div class="highlights-title">Key Skills</div>
                            <div class="highlight-list">
                                <span class="highlight-tag">Process Automation</span>
                                <span class="highlight-tag">Enterprise Integration</span>
                                <span class="highlight-tag">Scalable Operations</span>
                                <span class="highlight-tag">ROI Optimization</span>
                            </div>
                        </div>
                        
                        <div class="learning-examples">
                            <div class="examples-title">You'll Build</div>
                            <div class="example-item">
                                <div class="example-label">Multi-Stage Processes</div>
                                <div class="example-text">Chain AI interactions together: research ‚Üí analysis ‚Üí summary ‚Üí presentation</div>
                            </div>
                            <div class="example-item">
                                <div class="example-label">Smart Handoffs</div>
                                <div class="example-text">Pass outputs between AI agents seamlessly for complex, multi-step projects</div>
                            </div>
                        </div>
                        
                        <div class="session-snippet">
                            <pre>**Interaction Contract**

* One screen at a time. Show only what the learner needs now.
* Menu-first. Always render a menu; accept 1‚Äì9, b, m, ?, q
* Stateful. Maintain progress, timer, checklist, scores
* Dynamic Feedback. Analyze prompts automatically
* Prompt Cycle. Try ‚Üí Feedback ‚Üí Suggested ‚Üí Retry</pre>
                        </div>
                        <div class="session-actions">
                            <button class="copy-session-btn" onclick="copySessionContent('session-4-orchestrated-workflow.md')">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: inline-block; margin-right: 0.5rem;">
                                    <rect width="14" height="14" x="8" y="8" rx="2" ry="2"/>
                                    <path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>
                                </svg>
                                Copy Session
                            </button>
                            <button class="btn btn-secondary" onclick="viewSession('session-4-orchestrated-workflow.md')">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: inline-block; margin-right: 0.5rem;">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                    <circle cx="12" cy="12" r="3"/>
                                </svg>
                                Preview
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="session-card">
                    <div class="session-header">
                        <div class="session-number">Session 5</div>
                        <h3 class="session-title">Adaptive Partnership</h3>
                        <div class="session-subtitle">Dynamic AI Collaboration Patterns</div>
                    </div>
                    <div class="session-content">
                        <p class="session-description">Master adaptive leadership in the AI era. Develop the executive skill of pivoting AI strategies in real-time as market conditions change, ensuring your organization stays agile and competitive in dynamic business environments.</p>
                        
                        <div class="session-highlights">
                            <div class="highlights-title">Key Skills</div>
                            <div class="highlight-list">
                                <span class="highlight-tag">Agile Leadership</span>
                                <span class="highlight-tag">Market Responsiveness</span>
                                <span class="highlight-tag">Change Management</span>
                                <span class="highlight-tag">Strategic Pivoting</span>
                            </div>
                        </div>
                        
                        <div class="learning-examples">
                            <div class="examples-title">You'll Develop</div>
                            <div class="example-item">
                                <div class="example-label">Fluid Collaboration</div>
                                <div class="example-text">Switch seamlessly between brainstorming, analysis, and execution modes within one conversation</div>
                            </div>
                            <div class="example-item">
                                <div class="example-label">Smart Pivots</div>
                                <div class="example-text">Recognize when to change direction and guide AI to new approaches dynamically</div>
                            </div>
                        </div>
                        
                        <div class="session-snippet">
                            <pre>**Assessment & Scoring**

Rubric (0‚Äì100):
* Adaptive Response (0‚Äì30)
* Collaboration Patterns (0‚Äì30) 
* Context Switching (0‚Äì20)
* Partnership Depth (0‚Äì20)

Passing: ‚â•80</pre>
                        </div>
                        <div class="session-actions">
                            <button class="copy-session-btn" onclick="copySessionContent('session-5-adaptive-partnership.md')">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: inline-block; margin-right: 0.5rem;">
                                    <rect width="14" height="14" x="8" y="8" rx="2" ry="2"/>
                                    <path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>
                                </svg>
                                Copy Session
                            </button>
                            <button class="btn btn-secondary" onclick="viewSession('session-5-adaptive-partnership.md')">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: inline-block; margin-right: 0.5rem;">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                    <circle cx="12" cy="12" r="3"/>
                                </svg>
                                Preview
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="session-card">
                    <div class="session-header">
                        <div class="session-number">Session 6</div>
                        <h3 class="session-title">Warm Orchestration</h3>
                        <div class="session-subtitle">Human-AI Synergy & Advanced Techniques</div>
                    </div>
                    <div class="session-content">
                        <p class="session-description">Achieve executive mastery of AI collaboration. Develop an intuitive command of AI that becomes your natural leadership advantage‚Äîseamless, powerful, and transformative for your entire organization's productivity and innovation capacity.</p>
                        
                        <div class="session-highlights">
                            <div class="highlights-title">Key Skills</div>
                            <div class="highlight-list">
                                <span class="highlight-tag">Executive Mastery</span>
                                <span class="highlight-tag">Innovation Leadership</span>
                                <span class="highlight-tag">Organizational Transformation</span>
                                <span class="highlight-tag">Competitive Advantage</span>
                            </div>
                        </div>
                        
                        <div class="learning-examples">
                            <div class="examples-title">You'll Achieve</div>
                            <div class="example-item">
                                <div class="example-label">Effortless Partnership</div>
                                <div class="example-text">Collaborate with AI so naturally it feels like an extension of your own thinking</div>
                            </div>
                            <div class="example-item">
                                <div class="example-label">Advanced Integration</div>
                                <div class="example-text">Blend human creativity with AI capabilities in sophisticated, seamless workflows</div>
                            </div>
                        </div>
                        
                        <div class="session-snippet">
                            <pre>**Export Summary**

=== Session 6 Summary ===
Timestamp: {ISO8601}
Elapsed: {elapsed}m / 15m  
Progress: {done}/7 | Checklist: {checked}/7
Score: {score}/100 | Passed: {true/false}

Advanced Techniques Mastered:
- Warm orchestration patterns
- Intuitive AI collaboration
- Seamless human-AI synergy</pre>
                        </div>
                        <div class="session-actions">
                            <button class="copy-session-btn" onclick="copySessionContent('session-6-warm-orchestration.md')">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: inline-block; margin-right: 0.5rem;">
                                    <rect width="14" height="14" x="8" y="8" rx="2" ry="2"/>
                                    <path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>
                                </svg>
                                Copy Session
                            </button>
                            <button class="btn btn-secondary" onclick="viewSession('session-6-warm-orchestration.md')">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: inline-block; margin-right: 0.5rem;">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                    <circle cx="12" cy="12" r="3"/>
                                </svg>
                                Preview
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="info-section">
                    <div class="info-card">
                        <h3>How This Was Made</h3>
                        <p>Built using advanced prompt engineering and BBS-style interface design. Each session is crafted as a complete conversational agent that provides structured learning experiences.</p>
                    </div>
                    
                    <div class="info-card">
                        <h3>How to Use It</h3>
                        <p>Copy any session content and paste it into your preferred LLM (ChatGPT, Claude, etc.). Type "1" to start the guided experience. No setup required!</p>
                    </div>
                    
                    <div class="info-card">
                        <h3>Make It Your Own</h3>
                        <p>This is completely <strong>open source</strong> and free to use. Fork the <a href="https://github.com/atomic47labs/ai-bbs-sessions" target="_blank">GitHub repository</a> to customize sessions, create new learning modules, or adapt the BBS format for your organization's training needs.</p>
                    </div>
                </div>
                </div>
            </div>
            
            <!-- Test Drive Chatbot Pane -->
            <div class="right-pane">
                <div class="chat-pane-header">
                    <h2>
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: inline-block; margin-right: 0.5rem; vertical-align: text-top;">
                            <path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"/>
                            <circle cx="12" cy="13" r="3"/>
                        </svg>
                        Interactive Test Drive
                    </h2>
                    <p><span style="color: #b8860b; font-weight: 600;">TRY the LESSONS</span> right here!</p>
                </div>
                <div class="chatbot-section">
                    <div class="chatbot-header">
                        <div class="chatbot-title-section">
                            <div class="chatbot-title" id="chatbotTitle">Learning Modules</div>
                            <div class="session-context" id="sessionContext" style="display: none;">
                                <div class="session-title" id="sessionTitle"></div>
                                <div class="session-subtitle" id="sessionSubtitle"></div>
                            </div>
                        </div>
                        <div class="session-selector">
                            <button class="session-btn" onclick="loadSession(1)">1</button>
                            <button class="session-btn" onclick="loadSession(2)">2</button>
                            <button class="session-btn" onclick="loadSession(3)">3</button>
                            <button class="session-btn" onclick="loadSession(4)">4</button>
                            <button class="session-btn" onclick="loadSession(5)">5</button>
                            <button class="session-btn" onclick="loadSession(6)">6</button>
                            <button class="session-btn" onclick="clearChat()" style="margin-left: 0.5rem;">Clear</button>
                        </div>
                    </div>
                    <div id="serverlessNotice" class="serverless-notice" style="display: none;">
                        <div class="notice-content">
                            <span class="notice-icon">üöÄ</span>
                            <div class="notice-text">
                                <strong>Hosted AI Ready!</strong><br>
                                <small>Full AI features available - no API key required.</small>
                            </div>
                        </div>
                    </div>
                    <div class="api-key-section">
                        <select class="api-provider-select" id="apiProvider">
                            <option value="openai">OpenAI (GPT)</option>
                            <option value="anthropic">Anthropic (Claude)</option>
                        </select>
                        <input type="password" class="api-key-input" id="apiKey" placeholder="Enter your API key (optional - for enhanced responses)">
                        <div class="api-status disconnected" id="apiStatus">Checking...</div>
                    </div>
                    <div class="chat-container">
                        <div class="chat-messages" id="chatMessages">
                            <div class="welcome-message">
                                Select a learning module above (1-6) to begin your interactive AI literacy training!
                            </div>
                        </div>
                        <div class="chat-input-area">
                            <div class="chat-input-container">
                                <textarea 
                                    id="chatInput" 
                                    class="chat-input" 
                                    placeholder="Type your message or select a menu option (like '1' for Session Wizard)..."
                                    rows="1"
                                ></textarea>
                                <button class="send-btn" id="sendBtn" onclick="sendMessage()">Send</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <footer class="footer">
            <p><a href="https://atomic47.com" target="_blank">Atomic 47 Labs</a> ‚Ä¢ <a href="https://worksona.io" target="_blank">Worksona.io</a> ‚Ä¢ <a href="https://github.com/atomic47labs/ai-bbs-sessions" target="_blank">GitHub</a></p>
        </footer>
    </div>
    
    <!-- Modal -->
    <div id="sessionModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle"></h3>
                <span class="close">&times;</span>
            </div>
            <button class="copy-btn" onclick="copyToClipboard()">Copy Session Content</button>
            <pre id="sessionContent"></pre>
        </div>
    </div>
    
    <script>
        // Initialize Mermaid
        mermaid.initialize({ 
            startOnLoad: true, 
            theme: 'default',
            themeVariables: {
                primaryColor: '#0066cc',
                primaryTextColor: '#2d3748',
                primaryBorderColor: '#ff8c00',
                lineColor: '#4a5568'
            }
        });

        // Welcome Modal Functions
        function showWelcomeModal() {
            const modal = document.getElementById('welcomeModal');
            modal.classList.add('show');
        }

        function closeWelcomeModal() {
            const modal = document.getElementById('welcomeModal');
            const dontShowAgain = document.getElementById('dontShowAgain');
            
            if (dontShowAgain.checked) {
                localStorage.setItem('hideWelcomeModal', 'true');
            }
            
            modal.classList.remove('show');
        }

        // Check if modal should be shown on page load
        function checkWelcomeModal() {
            const hideModal = localStorage.getItem('hideWelcomeModal');
            if (!hideModal) {
                // Show modal after a short delay to ensure page is loaded
                setTimeout(showWelcomeModal, 500);
            }
        }

        // Check if serverless functions are available
        async function checkServerlessFunctions() {
            try {
                // Test environment endpoint
                const envResponse = await fetch('/.netlify/functions/test-env', {
                    method: 'GET',
                    headers: { 'Content-Type': 'application/json' }
                });
                
                if (envResponse.ok) {
                    const envData = await envResponse.json();
                    serverlessStatus.openai = envData.data.hasOpenAIKey;
                    serverlessStatus.anthropic = envData.data.hasAnthropicKey;
                    serverlessAvailable = serverlessStatus.openai || serverlessStatus.anthropic;
                    
                    console.log('Serverless functions available:', serverlessStatus);
                    
                    // Show serverless notice if available
                    const serverlessNotice = document.getElementById('serverlessNotice');
                    if (serverlessAvailable && serverlessNotice) {
                        serverlessNotice.style.display = 'block';
                    }
                    
                    updateApiStatus();
                    return true;
                }
            } catch (error) {
                console.log('Serverless functions not available:', error.message);
            }
            
            serverlessAvailable = false;
            serverlessStatus = { openai: false, anthropic: false };
            updateApiStatus();
            return false;
        }

        const modal = document.getElementById('sessionModal');
        const modalTitle = document.getElementById('modalTitle');
        const sessionContent = document.getElementById('sessionContent');
        const closeBtn = document.getElementsByClassName('close')[0];
        const chatMessages = document.getElementById('chatMessages');
        const chatInput = document.getElementById('chatInput');
        const sendBtn = document.getElementById('sendBtn');
        
        let currentSessionContent = '';
        let conversationHistory = [];
        let currentSession = null;
        let sessionState = {
            progress: 0,
            checklist: {},
            score: null,
            elapsed: 0,
            currentMenu: 'main',
            exerciseState: {},
            startTime: null,
            totalSteps: 7
        };
        let apiKey = '';
        let apiProvider = 'openai';
        let isConnected = false;
        let serverlessAvailable = false;
        let serverlessStatus = { openai: false, anthropic: false };
        let sessionTimer = null;
        
        // Session file mappings
        const sessionFiles = {
            1: 'session-1-prompting-mastery.md',
            2: 'session-2-contextual-direction.md', 
            3: 'session-3-strategic-reasoning.md',
            4: 'session-4-orchestrated-workflow.md',
            5: 'session-5-adaptive-partnership.md',
            6: 'session-6-warm-orchestration.md'
        };
        
        // Session contents cache
        let sessionContents = {};
        
        // Session metadata
        const sessionMetadata = {
            1: {
                title: "Prompting Mastery",
                subtitle: "Zero-Shot Prompting Fundamentals"
            },
            2: {
                title: "Contextual Direction", 
                subtitle: "Role-Based and Few-Shot Prompting"
            },
            3: {
                title: "Strategic Reasoning",
                subtitle: "Multi-Step Thinking & Problem Decomposition"
            },
            4: {
                title: "Orchestrated Workflow",
                subtitle: "Complex Multi-Agent Coordination"
            },
            5: {
                title: "Adaptive Partnership",
                subtitle: "Dynamic AI Collaboration Patterns"
            },
            6: {
                title: "Warm Orchestration",
                subtitle: "Human-AI Synergy & Advanced Techniques"
            }
        };
        
        // Load all sessions on page load
        async function preloadSessions() {
            for (let [num, file] of Object.entries(sessionFiles)) {
                try {
                    const response = await fetch(file);
                    const content = await response.text();
                    sessionContents[num] = content;
                } catch (error) {
                    console.error(`Error loading session ${num}:`, error);
                }
            }
        }
        
        // Update chat header with session context
        function updateChatHeader(sessionNum = null) {
            const chatbotTitle = document.getElementById('chatbotTitle');
            const sessionContext = document.getElementById('sessionContext');
            const sessionTitle = document.getElementById('sessionTitle');
            const sessionSubtitle = document.getElementById('sessionSubtitle');
            
            if (sessionNum && sessionMetadata[sessionNum]) {
                const metadata = sessionMetadata[sessionNum];
                chatbotTitle.textContent = `Session ${sessionNum}`;
                sessionTitle.textContent = metadata.title;
                sessionSubtitle.textContent = metadata.subtitle;
                sessionContext.style.display = 'block';
            } else {
                chatbotTitle.textContent = 'Learning Modules';
                sessionContext.style.display = 'none';
            }
        }
        
        // Initialize chatbot
        function initializeChatbot() {
            // Add welcome instructions
            const welcomeMessage = `üéØ **Welcome to Worksona AI Literacy!**

**Getting Started:**
1Ô∏è‚É£ **Select a Session** - Click any Session button (1-6) above
2Ô∏è‚É£ **Follow the Menu** - Use numbers (1, 2, 3) to navigate
3Ô∏è‚É£ **Optional Enhancement** - Add your API key below for AI-powered responses

**Quick Start:** Try clicking "Session 1" above, then type "1" to begin learning proven strategies!

**Need Help?** Type "?" in any session for assistance.`;

            addMessage(welcomeMessage, 'assistant');
            
            chatInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });
            
            chatInput.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = Math.min(this.scrollHeight, 120) + 'px';
            });
            
            // API key handling
            const apiKeyInput = document.getElementById('apiKey');
            const apiProviderSelect = document.getElementById('apiProvider');
            const apiStatus = document.getElementById('apiStatus');
            
            // Load saved API key and provider from localStorage
            loadApiSettings();
            
            apiKeyInput.addEventListener('input', function() {
                apiKey = this.value;
                saveApiSettings();
                updateApiStatus();
            });
            
            apiProviderSelect.addEventListener('change', function() {
                apiProvider = this.value;
                saveApiSettings();
                updateApiStatus();
            });
        }
        
        // Save API settings to localStorage
        function saveApiSettings() {
            localStorage.setItem('worksona-ai-literacy-api-key', apiKey);
            localStorage.setItem('worksona-ai-literacy-api-provider', apiProvider);
        }
        
        // Load API settings from localStorage
        function loadApiSettings() {
            const savedKey = localStorage.getItem('worksona-ai-literacy-api-key');
            const savedProvider = localStorage.getItem('worksona-ai-literacy-api-provider');
            
            if (savedKey) {
                apiKey = savedKey;
                document.getElementById('apiKey').value = savedKey;
            }
            
            if (savedProvider) {
                apiProvider = savedProvider;
                document.getElementById('apiProvider').value = savedProvider;
            }
            
            updateApiStatus();
        }
        
        // Update API connection status
        function updateApiStatus() {
            const apiStatus = document.getElementById('apiStatus');
            isConnected = apiKey.length > 20; // Basic validation
            
            if (serverlessAvailable) {
                // Serverless functions available
                const availableProviders = [];
                if (serverlessStatus.openai) availableProviders.push('OpenAI');
                if (serverlessStatus.anthropic) availableProviders.push('Claude');
                
                apiStatus.textContent = `üöÄ Ready (${availableProviders.join(', ')})`;
                apiStatus.className = 'api-status connected';
                apiStatus.title = 'Using hosted AI services - no API key required';
            } else if (isConnected) {
                // User provided API key
                apiStatus.textContent = `üîë Connected (${apiProvider.toUpperCase()})`;
                apiStatus.className = 'api-status connected';
                apiStatus.title = 'Using your personal API key';
            } else {
                // No connection
                apiStatus.textContent = '‚ö†Ô∏è Limited Mode';
                apiStatus.className = 'api-status disconnected';
                apiStatus.title = 'Add your API key for enhanced features, or use hosted version';
            }
        }
        
        // Make API call to LLM
        async function callLLM(messages) {
            // Prioritize serverless functions if available
            const useServerless = serverlessAvailable && (
                (apiProvider === 'openai' && serverlessStatus.openai) ||
                (apiProvider === 'anthropic' && serverlessStatus.anthropic)
            );
            
            if (useServerless) {
                // Use Netlify serverless functions
                const endpoint = apiProvider === 'openai' ? '/api/openai-chat' : '/api/anthropic-chat';
                const requestBody = {
                    messages: messages,
                    model: apiProvider === 'openai' ? 'gpt-4' : 'claude-3-5-sonnet-20241022'
                };

                const response = await fetch(endpoint, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(requestBody)
                });

                if (!response.ok) {
                    const errorData = await response.text();
                    throw new Error(`API request failed: ${response.status} ${errorData}`);
                }

                const data = await response.json();
                return apiProvider === 'openai' ? data.choices[0].message.content : data.content[0].text;
            } else if (apiKey && isConnected) {
                // Fallback to user's API key
            const requestBody = {
                model: apiProvider === 'openai' ? 'gpt-4o-mini' : 'claude-3-5-sonnet-20241022',
                messages: messages,
                    max_tokens: 2000,
                    temperature: 0.3
            };
            
            const apiUrl = apiProvider === 'openai' 
                ? 'https://api.openai.com/v1/chat/completions'
                : 'https://api.anthropic.com/v1/messages';
            
            const headers = {
                'Content-Type': 'application/json',
                    'Authorization': `Bearer ${apiKey}`
            };
            
            if (apiProvider === 'anthropic') {
                headers['anthropic-version'] = '2023-06-01';
            }
            
            const response = await fetch(apiUrl, {
                method: 'POST',
                headers: headers,
                body: JSON.stringify(requestBody)
            });
            
            if (!response.ok) {
                    const errorData = await response.text();
                    throw new Error(`API request failed: ${response.status} ${errorData}`);
            }
            
            const data = await response.json();
                return apiProvider === 'openai' ? data.choices[0].message.content : data.content[0].text;
            } else {
                // No API available - return helpful message
                throw new Error('AI features require either an API key or hosted service. Please add your API key or contact support.');
            }
        }
        
        // Check if content should be displayed as BBS-style
        function isBBSContent(content) {
            // Box drawing characters
            if (content.includes('‚îå‚îÄ') || content.includes('‚îÇ') || content.includes('‚îî‚îÄ')) {
                return true;
            }
            
            // Session-specific patterns
            const bbsPatterns = [
                /\*\*Step \d+:/,
                /\*\*Your Goal:/,
                /\*\*What You'll Do:/,
                /\*\*Exercise \d+:/,
                /\*\*Assessment/,
                /\*\*Resources/,
                /Ready to begin\?/,
                /Type ['"]1['"] to/,
                /Progress: \d+\/\d+/,
                /Checklist: \d+\/\d+/,
                /Session \d+ Summary/,
                /\[Session \d+/,
                /Received input:/,
                /Current menu:/
            ];
            
            return bbsPatterns.some(pattern => pattern.test(content));
        }
        
        // Colorize BBS content with terminal-style colors
        function colorizeBBSContent(content) {
            let colorized = content;
            
            // Headers and titles
            colorized = colorized.replace(/(\*\*Step \d+:[^*]*\*\*)/g, '<span class="bbs-step">$1</span>');
            colorized = colorized.replace(/(\*\*Your Goal:\*\*)/g, '<span class="bbs-goal">$1</span>');
            colorized = colorized.replace(/(\*\*What You'll Do:\*\*)/g, '<span class="bbs-goal">$1</span>');
            colorized = colorized.replace(/(\*\*Exercise \d+:[^*]*\*\*)/g, '<span class="bbs-step">$1</span>');
            colorized = colorized.replace(/(\*\*Assessment[^*]*\*\*)/g, '<span class="bbs-step">$1</span>');
            colorized = colorized.replace(/(\*\*Resources[^*]*\*\*)/g, '<span class="bbs-step">$1</span>');
            colorized = colorized.replace(/(\*\*Your Task:[^*]*\*\*)/g, '<span class="bbs-step">$1</span>');
            colorized = colorized.replace(/(\*\*Instructions:[^*]*\*\*)/g, '<span class="bbs-goal">$1</span>');
            
            // Action items and instructions (lines starting with -)
            colorized = colorized.replace(/^(- .+)$/gm, '<span class="bbs-action">$1</span>');
            
            // Prompts and questions
            colorized = colorized.replace(/(Ready to begin\?.*)/g, '<span class="bbs-prompt">$1</span>');
            colorized = colorized.replace(/(Type ['"][^'"]*['"].*)/g, '<span class="bbs-prompt">$1</span>');
            
            // Status information
            colorized = colorized.replace(/(\[Session \d+[^\]]*\])/g, '<span class="bbs-status">$1</span>');
            colorized = colorized.replace(/(Progress: \d+\/\d+)/g, '<span class="bbs-status">$1</span>');
            colorized = colorized.replace(/(Checklist: \d+\/\d+)/g, '<span class="bbs-status">$1</span>');
            
            // Numbers and menu options
            colorized = colorized.replace(/\b([1-9])\)/g, '<span class="bbs-number">$1)</span>');
            colorized = colorized.replace(/\b([bmq?])\)/g, '<span class="bbs-menu">$1)</span>');
            
            // Box drawing characters and menus
            colorized = colorized.replace(/(‚îå[‚îÄ]+‚îê)/g, '<span class="bbs-header">$1</span>');
            colorized = colorized.replace(/(‚îî[‚îÄ]+‚îò)/g, '<span class="bbs-header">$1</span>');
            colorized = colorized.replace(/(‚îÇ[^‚îÇ]*‚îÇ)/g, '<span class="bbs-menu">$1</span>');
            
            // Success and completion messages
            colorized = colorized.replace(/(‚úì.*)/g, '<span class="bbs-success">$1</span>');
            colorized = colorized.replace(/(üéâ.*)/g, '<span class="bbs-success">$1</span>');
            colorized = colorized.replace(/(PASSED.*)/g, '<span class="bbs-success">$1</span>');
            colorized = colorized.replace(/(Complete.*)/g, '<span class="bbs-success">$1</span>');
            
            // Warnings and errors
            colorized = colorized.replace(/(‚ö†.*)/g, '<span class="bbs-warning">$1</span>');
            colorized = colorized.replace(/(‚ùå.*)/g, '<span class="bbs-warning">$1</span>');
            colorized = colorized.replace(/(Error.*)/g, '<span class="bbs-warning">$1</span>');
            
            // Special formatting for remaining bold text that wasn't caught
            colorized = colorized.replace(/(\*\*[^<][^*]*\*\*)/g, '<span class="bbs-emphasis">$1</span>');
            
            return colorized;
        }
        
        // Add message to chat
        function addMessage(content, type = 'assistant', timestamp = null) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}`;
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            
            // Handle BBS-style content
            if (isBBSContent(content)) {
                const bbsDiv = document.createElement('div');
                bbsDiv.className = 'bbs-content';
                
                // Apply colorization to BBS content
                const colorizedContent = colorizeBBSContent(content);
                bbsDiv.innerHTML = colorizedContent.replace(/\n/g, '<br>');
                
                contentDiv.appendChild(bbsDiv);
            } else {
                contentDiv.innerHTML = content.replace(/\n/g, '<br>');
            }
            
            messageDiv.appendChild(contentDiv);
            
            const timeDiv = document.createElement('div');
            timeDiv.className = 'message-time';
            timeDiv.textContent = timestamp || new Date().toLocaleTimeString();
            messageDiv.appendChild(timeDiv);
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // Store in history
            conversationHistory.push({
                content: content,
                type: type,
                timestamp: timestamp || new Date().toISOString()
            });
        }
        
        // Show typing indicator
        function showTyping() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'typing-indicator';
            typingDiv.id = 'typing';
            typingDiv.innerHTML = `
                AI is thinking...
                <div class="typing-dots">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
            `;
            chatMessages.appendChild(typingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        
        // Hide typing indicator
        function hideTyping() {
            const typing = document.getElementById('typing');
            if (typing) typing.remove();
        }
        
        // Parse BBS session content and extract parts
        function parseSession(content) {
            const lines = content.split('\n');
            const result = {
                title: '',
                menu: '',
                wizard: '',
                exercises: {}
            };
            
            // Extract title
            const titleMatch = content.match(/# Learning Facilitator.*?\n.*?Session (\d+): (.+)\n/);
            if (titleMatch) {
                result.title = `Session ${titleMatch[1]}: ${titleMatch[2]}`;
            }
            
            // Extract main menu
            const menuMatch = content.match(/## Main Menu\n\n```([\s\S]*?)```/);
            if (menuMatch) {
                result.menu = menuMatch[1].trim();
            }
            
            return result;
        }
        
        // Load a specific session
        async function loadSession(sessionNum) {
            currentSession = sessionNum;
            sessionState = { 
                progress: 0, 
                checklist: {}, 
                score: null, 
                elapsed: 0,
                currentMenu: 'main',
                exerciseState: {},
                startTime: new Date(),
                totalSteps: 7
            };
            
            // Update chat header with session context
            updateChatHeader(sessionNum);
            
            // Start session timer
            if (sessionTimer) clearInterval(sessionTimer);
            sessionTimer = setInterval(() => {
                if (sessionState.startTime) {
                    sessionState.elapsed = Math.floor((new Date() - sessionState.startTime) / 60000);
                }
            }, 60000);
            
            // Update active button
            document.querySelectorAll('.session-btn').forEach(btn => btn.classList.remove('active'));
            if (typeof event !== 'undefined' && event.target) {
            event.target.classList.add('active');
            } else {
                // Find the button for this session and make it active
                const sessionBtn = document.querySelector(`[onclick="loadSession(${sessionNum})"]`);
                if (sessionBtn) sessionBtn.classList.add('active');
            }
            
            // Clear welcome message
            const welcome = document.querySelector('.welcome-message');
            if (welcome) welcome.remove();
            
            const content = sessionContents[sessionNum];
            if (!content) {
                addMessage('Session not found. Please try again.', 'assistant');
                return;
            }
            
            const parsed = parseSession(content);
            
            showTyping();
            setTimeout(() => {
                hideTyping();
                addMessage(`Loading ${parsed.title}...`, 'assistant');
                
                setTimeout(() => {
                    const statusBar = getStatusBar();
                    const mainMenu = getMainMenu();
                    
                    addMessage(statusBar + '\n\n' + mainMenu, 'assistant');
                    addMessage("Session loaded! Type '1' to start the Session Wizard, or use any menu option.", 'assistant');
                }, 1000);
            }, 1500);
        }
        
        // Clear chat
        function clearChat() {
            chatMessages.innerHTML = '<div class="welcome-message">Welcome! Click a session number above to load an AI learning session, or chat normally for help with the sessions.</div>';
            conversationHistory = [];
            currentSession = null;
            sessionState = { 
                progress: 0, 
                checklist: {}, 
                score: null, 
                elapsed: 0,
                currentMenu: 'main',
                exerciseState: {},
                startTime: null,
                totalSteps: 7
            };
            
            // Clear session timer
            if (sessionTimer) {
                clearInterval(sessionTimer);
                sessionTimer = null;
            }
            
            // Reset chat header
            updateChatHeader();
            
            // Remove active states
            document.querySelectorAll('.session-btn').forEach(btn => btn.classList.remove('active'));
        }
        
        // Get current status bar
        function getStatusBar() {
            const sessionTitles = {
                1: 'Zero-Shot',
                2: 'Contextual Direction', 
                3: 'Strategic Reasoning',
                4: 'Orchestrated Workflow',
                5: 'Adaptive Partnership',
                6: 'Warm Orchestration'
            };
            
            const title = sessionTitles[currentSession] || 'Session';
            const checkedCount = Object.values(sessionState.checklist).filter(Boolean).length;
            const scoreText = sessionState.score !== null ? sessionState.score : 'N/A';
            
            return `[Session ${currentSession} ¬∑ ${title}] [‚è±Ô∏è ${sessionState.elapsed}/15m] [Progress: ${sessionState.progress}/${sessionState.totalSteps}]
Checklist: ${checkedCount}/${sessionState.totalSteps} | Score: ${scoreText}`;
        }
        
        // Get main menu
        function getMainMenu() {
            return `‚îå‚îÄ AI Mastery ¬∑ Session ${currentSession} ¬∑ BBS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 1) Session Wizard (start here)                              ‚îÇ
‚îÇ 2) Exercises                                                ‚îÇ
‚îÇ 3) Checklist                                                ‚îÇ
‚îÇ 4) Assessment & Scoring                                     ‚îÇ
‚îÇ 5) Resources                                                ‚îÇ
‚îÇ m) Main  b) Back  ?) Help  q) Quit                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò`;
        }
        
        // Process session navigation
        async function processSessionInput(input) {
            const content = sessionContents[currentSession];
            if (!content) return "Session not found. Please try loading a session first.";
            
            // Handle input "1" - either main menu or contextual
            if (input === '1') {
                if (sessionState.currentMenu === 'main') {
                    sessionState.currentMenu = 'wizard';
                    sessionState.progress = Math.max(sessionState.progress, 1);
                    return await startSessionWizard();
                } else {
                    return await handleContextualInput(input);
                }
            }
            
            // Handle menu navigation
            if (input === '2') {
                sessionState.currentMenu = 'exercises';
                return getExercisesMenu();
            }
            
            if (input === '3') {
                sessionState.currentMenu = 'checklist';
                return getChecklist();
            }
            
            if (input === '4') {
                sessionState.currentMenu = 'assessment';
                return getAssessmentMenu();
            }
            
            if (input === '5') {
                sessionState.currentMenu = 'resources';
                return getResourcesMenu();
            }
            
            if (input === '?') {
                return getHelpMenu();
            }
            
            if (input === 'q') {
                return exportSummary();
            }
            
            if (input === 'm') {
                sessionState.currentMenu = 'main';
                const statusBar = getStatusBar();
                const mainMenu = getMainMenu();
                return statusBar + '\n\n' + mainMenu;
            }
            
            if (input === 'b') {
                return goBack();
            }
            
            // Handle context-specific input
            const contextualResponse = await handleContextualInput(input);
            if (contextualResponse) return contextualResponse;
            
            // Default fallback response for testing
            return `Received input: "${input}" in session ${currentSession}. Current menu: ${sessionState.currentMenu}. Try typing '1' for Session Wizard, '2' for Exercises, etc.`;
        }
        
        // Start session wizard
        async function startSessionWizard() {
            const welcomeText = `**Step 1: Welcome & Goals (1m)**

Welcome to this interactive learning session! Over the next 15 minutes, you'll master key AI prompting techniques through hands-on exercises.

**Your Goal:** Learn to craft effective prompts that get exactly the results you want.

**What You'll Do:**
- Try prompts and get instant feedback
- See improved versions you can copy-paste
- Practice with real examples
- Build skills step by step

Ready to begin? Type '1' to continue to warm-up exercises, or 'b' to go back to the main menu.`;
            
            return welcomeText;
        }
        
        // Handle contextual input based on current menu state
        async function handleContextualInput(input) {
            if (sessionState.currentMenu === 'wizard') {
                return await handleWizardInput(input);
            }
            
            if (sessionState.currentMenu === 'exercises') {
                return await handleExerciseInput(input);
            }
            
            if (sessionState.currentMenu === 'assessment') {
                return await handleAssessmentInput(input);
            }
            
            // Default response for unrecognized input
            return "I didn't understand that command. Try:\n- Type '1' for Session Wizard\n- Type '2' for Exercises\n- Type '?' for help\n- Type 'm' for main menu";
        }
        
        // Handle wizard navigation
        async function handleWizardInput(input) {
            if (input === '1') {
                sessionState.progress = Math.max(sessionState.progress, 2);
                return await startWarmUpExercise();
            }
            
            return "Type '1' to continue to warm-up exercises, or 'b' to go back.";
        }
        
        // Start warm-up exercise
        async function startWarmUpExercise() {
            sessionState.checklist[0] = true; // Mark warm-up as started
            
            return `**Step 2: Warm-Up Exercise (2m)**

**Your Task:** Write a prompt to get AI to help you write a professional email declining a meeting.

**Instructions:**
1. Type your prompt below
2. I'll analyze it and show you improvements
3. You'll see the business impact of better prompting

**Example of what NOT to do:**
"Help me write an email"

**What makes a good prompt:**
- Specific context and audience
- Clear desired outcome
- Relevant constraints

Go ahead - type your prompt for declining a meeting professionally:`;
        }
        
        // Handle exercise input
        async function handleExerciseInput(input) {
            if (input.match(/^[1-4]$/)) {
                const exerciseNum = parseInt(input);
                return await startSpecificExercise(exerciseNum);
            }
            
            // If it's a text prompt, analyze it
            if (input.length > 10) {
                return await analyzePrompt(input);
            }
            
            return getExercisesMenu();
        }
        
        // Start specific exercise
        async function startSpecificExercise(exerciseNum) {
            const exercises = {
                1: "**Warm-Up Exercise**\n\nWrite a prompt to get AI to help you write a professional email declining a meeting.\n\nType your prompt:",
                2: "**Exercise 1: Minimal vs. Refined**\n\nCompare these two approaches:\n\nMinimal: 'Write a report'\nRefined: 'Write a 2-page executive summary analyzing Q3 sales performance for the board meeting, focusing on key metrics and actionable recommendations'\n\nNow you try - write a refined prompt for creating a project timeline:",
                3: "**Exercise 2: Error Recovery**\n\nYou asked AI to 'explain blockchain' and got a 500-word technical essay, but you needed a 2-sentence explanation for your CEO.\n\nWrite a follow-up prompt to fix this:",
                4: "**Exercise 3: Role/Constraint Contrast**\n\nWrite two versions of a prompt asking AI to review a marketing campaign:\n1. As a data analyst\n2. As a creative director\n\nStart with version 1:"
            };
            
            sessionState.progress = Math.max(sessionState.progress, exerciseNum + 1);
            return exercises[exerciseNum] || "Exercise not found.";
        }
        
        // Analyze user prompt
        async function analyzePrompt(prompt) {
            if (!isConnected) {
                return getOfflinePromptAnalysis(prompt);
            }
            
            const analysisPrompt = `You are an expert prompt engineering tutor. Analyze this business prompt and provide:

1. **Strengths** (what works well)
2. **Weaknesses** (what's missing or unclear) 
3. **Business Impact** (how improvements affect results)
4. **3 Improved Versions** (copy-paste ready, progressively better)

User's prompt: "${prompt}"

Be concise, practical, and business-focused. Format as a BBS-style response.`;
            
            try {
                const messages = [
                    { role: 'system', content: 'You are a business-focused prompt engineering tutor providing concise, actionable feedback.' },
                    { role: 'user', content: analysisPrompt }
                ];
                
                const analysis = await callLLM(messages);
                
                // Update progress
                sessionState.checklist[1] = true;
                
                return analysis + "\n\nType 'b' to go back to exercises, or 'm' for main menu.";
            } catch (error) {
                return getOfflinePromptAnalysis(prompt);
            }
        }
        
        // Offline prompt analysis fallback
        function getOfflinePromptAnalysis(prompt) {
            const analysis = `**Prompt Analysis**

**Your Prompt:** "${prompt}"

**Quick Assessment:**
‚úì Good: You provided a specific request
‚ö† Consider: Adding context, audience, format, constraints

**Improved Version:**
"As a [role], help me write a professional email to [specific person] declining [specific meeting] because [brief reason]. Keep it polite, brief, and suggest alternative engagement. Format as a complete email."

**Business Impact:** Specific prompts reduce revision cycles by 60% and improve stakeholder satisfaction.

Type 'b' for exercises menu or 'm' for main menu.`;
            
            sessionState.checklist[1] = true;
            return analysis;
        }
        
        // Handle assessment input
        async function handleAssessmentInput(input) {
            // Handle scoring input
            const scoreMatch = input.match(/(\d+)\s+(\d+)\s+(\d+)\s+(\d+)/);
            if (scoreMatch) {
                const scores = scoreMatch.slice(1).map(Number);
                const total = scores.reduce((a, b) => a + b, 0);
                sessionState.score = total;
                sessionState.checklist[6] = total >= 70;
                
                return `**Assessment Results**\n\nYour Scores:\n- Response Relevance: ${scores[0]}/30\n- Error Recovery: ${scores[1]}/30\n- Prompt Refinement: ${scores[2]}/20\n- Reflection Depth: ${scores[3]}/20\n\n**Total Score: ${total}/100**\n\n${total >= 70 ? 'üéâ **PASSED!** You\'ve mastered the fundamentals.' : 'üìö **Keep Practicing** - Try more exercises to improve.'}\n\nType 'q' to export summary or 'm' for main menu.`;
            }
            
            return "Please enter four scores separated by spaces (e.g., '25 28 18 19') or 'b' to go back.";
        }
        
        // Go back to previous menu
        function goBack() {
            if (sessionState.currentMenu === 'main') {
                return "Already at main menu.";
            }
            
            sessionState.currentMenu = 'main';
            const statusBar = getStatusBar();
            const mainMenu = getMainMenu();
            return statusBar + '\n\n' + mainMenu;
        }
        
        // Get exercises menu
        function getExercisesMenu() {
            return `**Exercises**

‚îå‚îÄ Exercises ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 1) Warm-Up (Zero-Shot)                                     ‚îÇ
‚îÇ 2) Exercise 1: Minimal vs. Refined                         ‚îÇ
‚îÇ 3) Exercise 2: Error Recovery                              ‚îÇ
‚îÇ 4) Exercise 3: Role/Constraint Contrast                    ‚îÇ
‚îÇ                                                            ‚îÇ
‚îÇ m) Main  b) Back  ?) Help                                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

Select an exercise to practice, or use navigation options.`;
        }
        
        // Get checklist
        function getChecklist() {
            const items = [
                "Warm-Up completed",
                "Exercise 1: Minimal vs Refined", 
                "Exercise 2: Error Recovery",
                "Exercise 3: Role/Constraint Contrast",
                "Reflection captured",
                "Self-assessment submitted",
                "‚â•70 Gate passed"
            ];
            
            let checklist = "**Progress Checklist**\n\n";
            items.forEach((item, i) => {
                const checked = sessionState.checklist[i] ? '‚úì' : '‚òê';
                checklist += `${checked} ${i + 1}. ${item}\n`;
            });
            
            return checklist + "\nType numbers (1,3,5) to toggle items, or 'b' to go back.";
        }
        
        // Get assessment menu
        function getAssessmentMenu() {
            return `**Assessment & Scoring**

Ready to evaluate your progress? Rate yourself in these areas:

- **Response Relevance (0-30):** How well do your prompts get relevant results?
- **Error Recovery (0-30):** Can you fix unclear AI responses effectively?
- **Prompt Refinement (0-20):** Do you write specific, actionable prompts?
- **Reflection Depth (0-20):** Can you analyze what makes prompts work?

**Passing Score:** ‚â•70

**Format:** Enter four numbers separated by spaces (e.g., "25 28 18 19")

Type your self-assessment scores, or 'b' to go back.`;
        }
        
        // Get resources menu
        function getResourcesMenu() {
            return `**Resources & References**

**Quick Reference:**
‚Ä¢ **Specificity beats generality** - "Write a 2-sentence summary for executives" vs "Summarize this"
‚Ä¢ **Context drives quality** - Include audience, purpose, constraints
‚Ä¢ **Examples guide output** - Show the format you want
‚Ä¢ **Roles shape perspective** - "As a CFO..." vs "As a designer..."

**Common Patterns:**
‚Ä¢ **Task + Context + Format + Constraints**
‚Ä¢ **"As a [role], help me [task] for [audience] by [method]"**
‚Ä¢ **"Create a [format] that [outcome] using [style/tone]"**

**Business Impact:**
‚Ä¢ Clear prompts reduce revision cycles by 60%
‚Ä¢ Specific requests improve output quality by 40%
‚Ä¢ Role-based prompts increase relevance by 50%

Type 'b' to go back or 'm' for main menu.`;
        }
        
        // Get help menu
        function getHelpMenu() {
            return `**Help & Navigation**

**Controls:**
‚Ä¢ **1-9** - Select menu items
‚Ä¢ **b** - Go back to previous menu
‚Ä¢ **m** - Return to main menu
‚Ä¢ **?** - Show this help
‚Ä¢ **q** - Quit and export summary

**Tips:**
‚Ä¢ You can revisit any exercise at any time
‚Ä¢ Progress updates automatically as you complete tasks
‚Ä¢ Use the Session Wizard (option 1) for guided experience
‚Ä¢ Type full prompts when exercises ask for them
‚Ä¢ Aim to complete the session in 15 minutes

**Session Structure:**
1. Session Wizard (guided path)
2. Individual exercises (practice specific skills)
3. Checklist (track progress)
4. Assessment (evaluate learning)
5. Resources (reference materials)

Type any menu option to continue.`;
        }
        
        // Export session summary  
        function exportSummary() {
            const now = new Date();
            const checkedCount = Object.values(sessionState.checklist).filter(Boolean).length;
            const passed = sessionState.score !== null && sessionState.score >= 70;
            
            const sessionTitles = {
                1: 'Zero-Shot Prompting Mastery',
                2: 'Contextual Direction Mastery', 
                3: 'Strategic Reasoning',
                4: 'Orchestrated Workflow',
                5: 'Adaptive Partnership',
                6: 'Warm Orchestration'
            };
            
            const title = sessionTitles[currentSession] || 'AI Learning Session';
            
            return `**Export Summary**

=== ${title} ===
Timestamp: ${now.toISOString()}
Elapsed: ${sessionState.elapsed}m / 15m
Progress: ${sessionState.progress}/${sessionState.totalSteps} | Checklist: ${checkedCount}/${sessionState.totalSteps}
Score: ${sessionState.score || 'N/A'}/100 | Passed: ${passed ? 'Yes' : 'No'}

**Skills Practiced:**
${getSkillsSummary()}

**Conversation History:** ${conversationHistory.length} messages
**Session Status:** ${sessionState.progress >= sessionState.totalSteps ? 'Complete' : 'In Progress'}

${passed ? 'üéâ **Congratulations!** You\'ve mastered this session.' : 'üìö **Keep Learning** - Try more exercises or retake the assessment.'}

Type 'm' for main menu or select a new session to continue learning.`;
        }
        
        // Get skills summary for export
        function getSkillsSummary() {
            const skillsBySession = {
                1: ['Clear Instructions', 'Specificity', 'Error Recovery', 'Constraints'],
                2: ['Role Assignment', 'Few-Shot Examples', 'Format Control', 'Perspective Shifting'],
                3: ['Problem Decomposition', 'Chain of Thought', 'Step-by-Step Logic', 'Complex Analysis'],
                4: ['Multi-Agent Coordination', 'Workflow Design', 'Process Optimization', 'Task Sequencing'],
                5: ['Dynamic Adaptation', 'Context Switching', 'Partnership Patterns', 'Collaborative Flow'],
                6: ['Intuitive Patterns', 'Seamless Integration', 'Advanced Synergy', 'Natural Flow']
            };
            
            const skills = skillsBySession[currentSession] || ['General AI Interaction'];
            return skills.map((skill, i) => `- ${sessionState.checklist[i] ? '‚úì' : '‚òê'} ${skill}`).join('\n');
        }
        
        // Send message
        async function sendMessage() {
            const message = chatInput.value.trim();
            if (!message) return;
            
            
            // Disable input
            sendBtn.disabled = true;
            chatInput.disabled = true;
            
            // Add user message
            addMessage(message, 'user');
            chatInput.value = '';
            chatInput.style.height = 'auto';
            
            // Show typing
            showTyping();
            
            try {
                let response;
                
                
                if (currentSession && isConnected) {
                    // Use enhanced LLM processing for loaded sessions with API key
                    response = await processSessionWithLLM(message);
                } else if (currentSession) {
                    // Use local session processing for loaded sessions without API key
                    response = await processSessionInput(message);
                } else if (isConnected) {
                    // Use LLM for general chat when API key is available
                    const systemPrompt = "You are an AI learning assistant for BBS Sessions. Help users understand how to use the interactive AI learning sessions. Be helpful and guide them to try the sessions.";
                    const messages = [
                        { role: 'system', content: systemPrompt },
                        ...conversationHistory.slice(-6).map(h => ({ 
                            role: h.type === 'user' ? 'user' : 'assistant', 
                            content: h.content 
                        })),
                        { role: 'user', content: message }
                    ];
                    
                    response = await callLLM(messages);
                } else {
                    // Fallback to local chat when no API key
                    response = handleGeneralChat(message);
                }
                
                hideTyping();
                addMessage(response, 'assistant');
                
            } catch (error) {
                hideTyping();
                console.error('Error:', error);
                addMessage(`Error: ${error.message}. Using offline mode.`, 'assistant');
                
                // Fallback to local processing
                let response;
                if (currentSession) {
                    response = await processSessionInput(message);
                } else {
                    response = handleGeneralChat(message);
                }
                addMessage(response, 'assistant');
            }
            
            // Re-enable input
            sendBtn.disabled = false;
            chatInput.disabled = false;
            chatInput.focus();
        }
        
        // Process session with LLM integration
        async function processSessionWithLLM(message) {
            const sessionContent = sessionContents[currentSession];
            if (!sessionContent) return "Session not found.";
            
            // First check if it's a simple navigation command
            if (message.match(/^[1-9bmq?]$/)) {
                return await processSessionInput(message);
            }
            
            // For text input, use LLM with session context
            const sessionPrompt = `${sessionContent}

---

CURRENT SESSION STATE:
- Session: ${currentSession}
- Progress: ${sessionState.progress}/${sessionState.totalSteps}
- Current Menu: ${sessionState.currentMenu}
- Elapsed Time: ${sessionState.elapsed} minutes
- Checklist Status: ${JSON.stringify(sessionState.checklist)}

USER INPUT: "${message}"

Respond as the BBS session facilitator. Follow the interaction contract and session structure. Provide appropriate feedback, navigation, or exercise responses based on the current state and user input. Keep responses concise and actionable.`;
            
            try {
                const messages = [
                    { role: 'system', content: 'You are a BBS-style learning session facilitator. Follow the session structure and provide interactive, educational responses.' },
                    { role: 'user', content: sessionPrompt }
                ];
                
                const response = await callLLM(messages);
                
                // Update session state based on response
                updateSessionStateFromResponse(message, response);
                
                return response;
            } catch (error) {
                // Fallback to local processing
                return await processSessionInput(message);
            }
        }
        
        // Update session state based on LLM response
        function updateSessionStateFromResponse(userInput, llmResponse) {
            // Update progress for certain activities
            if (userInput.length > 20 && sessionState.currentMenu === 'wizard') {
                sessionState.progress = Math.max(sessionState.progress, 3);
                sessionState.checklist[1] = true; // Mark exercise completion
            }
            
            // Update checklist for assessment
            if (userInput.match(/(\d+)\s+(\d+)\s+(\d+)\s+(\d+)/)) {
                sessionState.checklist[5] = true; // Assessment completed
            }
            
            // Update menu state based on response content
            if (llmResponse.includes('Exercises')) {
                sessionState.currentMenu = 'exercises';
            } else if (llmResponse.includes('Assessment')) {
                sessionState.currentMenu = 'assessment';
            } else if (llmResponse.includes('Resources')) {
                sessionState.currentMenu = 'resources';
            }
        }
        
        // Handle general chat when no session loaded
        function handleGeneralChat(message) {
            const lower = message.toLowerCase();
            
            if (lower.includes('help') || lower.includes('how')) {
                return "I can help you with AI BBS Sessions! Here's what you can do:\n\n‚Ä¢ **Load a session** by clicking buttons 1-6 above\n‚Ä¢ **Start with Session 1** if you're new to AI prompting\n‚Ä¢ **Each session takes ~15 minutes** and teaches specific skills\n‚Ä¢ **Sessions are interactive** - you'll practice real prompting techniques\n\nWhich session interests you most?";
            }
            
            if (lower.includes('session') || lower.includes('start')) {
                return "Great! Here are the available sessions:\n\n**Session 1:** Prompting Mastery (Start here!)\n**Session 2:** Contextual Direction\n**Session 3:** Strategic Reasoning\n**Session 4:** Orchestrated Workflow\n**Session 5:** Adaptive Partnership\n**Session 6:** Warm Orchestration\n\nClick any number above to load that session and begin!";
            }
            
            if (lower.includes('what') || lower.includes('explain')) {
                return "AI BBS Sessions are interactive learning experiences that teach you to work effectively with AI. Each session:\n\n‚Ä¢ Runs like a classic computer terminal interface\n‚Ä¢ Teaches specific AI interaction skills\n‚Ä¢ Provides hands-on exercises with feedback\n‚Ä¢ Takes about 15 minutes to complete\n‚Ä¢ Builds your expertise step-by-step\n\nReady to try one? Click a session number above!";
            }
            
            return "Hi! I'm here to guide you through the AI BBS Sessions. You can:\n\n‚Ä¢ Click session numbers 1-6 above to start learning\n‚Ä¢ Ask me questions about the sessions\n‚Ä¢ Get help with AI prompting techniques\n\nWhat would you like to explore?";
        }
        
        // Copy session content directly
        async function copySessionContent(filename) {
            const button = event.target;
            const originalText = button.textContent;
            
            try {
                const response = await fetch(filename);
                const content = await response.text();
                
                await navigator.clipboard.writeText(content);
                button.textContent = '‚úÖ Copied!';
                button.classList.add('copied');
                
                setTimeout(() => {
                    button.textContent = originalText;
                    button.classList.remove('copied');
                }, 2000);
                
            } catch (error) {
                console.error('Failed to copy session:', error);
                button.textContent = '‚ùå Error';
                setTimeout(() => {
                    button.textContent = originalText;
                }, 2000);
            }
        }
        
        // Modal functions (unchanged)
        async function viewSession(filename) {
            try {
                const response = await fetch(filename);
                const content = await response.text();
                currentSessionContent = content;
                
                modalTitle.textContent = filename.replace('.md', '').replace(/-/g, ' ').toUpperCase();
                sessionContent.textContent = content;
                modal.style.display = 'block';
            } catch (error) {
                alert('Error loading session: ' + error.message);
            }
        }
        
        function copyToClipboard() {
            navigator.clipboard.writeText(currentSessionContent).then(() => {
                const btn = document.querySelector('.copy-btn');
                const originalText = btn.textContent;
                btn.textContent = 'Copied!';
                setTimeout(() => {
                    btn.textContent = originalText;
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy: ', err);
                const textArea = document.createElement('textarea');
                textArea.value = currentSessionContent;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                
                const btn = document.querySelector('.copy-btn');
                const originalText = btn.textContent;
                btn.textContent = 'Copied!';
                setTimeout(() => {
                    btn.textContent = originalText;
                }, 2000);
            });
        }
        
        closeBtn.onclick = function() {
            modal.style.display = 'none';
        }
        
        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        }
        
        // Initialize everything
        document.addEventListener('DOMContentLoaded', async function() {
            preloadSessions();
            initializeChatbot();
            
            // Check for serverless functions first
            await checkServerlessFunctions();
            
            checkWelcomeModal();
        });
        
        // Cleanup on page unload
        window.addEventListener('beforeunload', function() {
            if (sessionTimer) {
                clearInterval(sessionTimer);
            }
        });
    </script>
</body>
</html>